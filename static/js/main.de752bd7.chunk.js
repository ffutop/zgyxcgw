(this.webpackJsonpzgyxcgw=this.webpackJsonpzgyxcgw||[]).push([[0],{127:function(e,t,a){},128:function(e,t,a){},205:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),c=a(27),o=a.n(c),r=(a(127),a(102)),s=a(103),d=a(32),u=a(120),h=a(116),p=(a(128),a(208)),l=a(211),g=a(212),b=a(213),f=a(214),j=a(38),v=a(209),x=a(210),m=(a(129),function(e){return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[-.+*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null}),y=function(e,t,a,n,i,c){if(!e||/^(?:expires|max-age|path|domain|secure)$/i.test(e))return!1;var o="";if(a)switch(a.constructor){case Number:o=a===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+a;break;case String:o="; expires="+a;break;case Date:o="; expires="+a.toUTCString()}return document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+o+(i?"; domain="+i:"")+(n?"; path="+n:"")+(c?"; secure":""),!0},k=a(23),C=p.a.Header,w=p.a.Content,O=l.a.TextArea,P=["20201","20202","20203","20204",""],D=[{title:"invoiceId",dataIndex:"invoiceId",key:"invoiceId"},{title:"price",dataIndex:"price",key:"price"}],S=[{title:"invoiceId",dataIndex:"invoiceId",key:"invoiceId"},{title:"price",dataIndex:"price",key:"price"},{title:"paid",dataIndex:"paid",key:"paid"}],I=new Map([[-1,"\u533b\u9662\u672a\u652f\u4ed8"],[9,"\u4e2d\u5fc3\u5df2\u652f\u4ed8"]]),T=function(e,t){return"_search=false&nd="+(new Date).getTime()+"&rows=2000&page=1&sidx=&sord=asc&invoiceId="+e+"&multiWords=&goodsIds=&purchaseType=&orderdetailState=&submitStartTime=&submitEndTime=&hospitalName=&distributeId="+(""===t?"":"&orderTime2="+t)},M=function(e,t,a){return"_search=false&nd="+(new Date).getTime()+"&rows="+a+"&page=1&sidx=&sord=asc&orderTime2="+t+"&goodsId=&invoiceId="+e+"&storageDateStartTime=&storageDateEndTime=&hospitalName=&payOrderCode=&storageTags=&payStatus2="},R=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).hcloginToken=m("hcloginToken"),n.state={cookie:m("hcloginToken"),textValue:"",withPay:!1,columns:D,data:[],invoicePriceMap:new Map,invoicePaidMap:new Map},n.handleInputChange=n.handleInputChange.bind(Object(d.a)(n)),n.handleTextAreaChange=n.handleTextAreaChange.bind(Object(d.a)(n)),n.handleSwitchChange=n.handleSwitchChange.bind(Object(d.a)(n)),n.getSuppurDistributeRecent=n.getSuppurDistributeRecent.bind(Object(d.a)(n)),n.getPayData=n.getPayData.bind(Object(d.a)(n)),n.setCookie=n.setCookie.bind(Object(d.a)(n)),n.updateDataPriceMap=n.updateDataPriceMap.bind(Object(d.a)(n)),n.updateDataPaidMap=n.updateDataPaidMap.bind(Object(d.a)(n)),n.updateData=n.updateData.bind(Object(d.a)(n)),n}return Object(s.a)(a,[{key:"setCookie",value:function(){y("hcloginToken",this.state.cookie)}},{key:"handleInputChange",value:function(e){this.setState({cookie:e.target.value})}},{key:"handleTextAreaChange",value:function(e){this.setState({textValue:e.target.value})}},{key:"handleSwitchChange",value:function(e){this.setState((function(t){return!0===e?{withPay:e,columns:S}:{withPay:e,columns:D}})),this.setState({withPay:e})}},{key:"getSuppurDistributeRecent",value:function(){var e=this;""!==this.state.cookie&&this.setCookie(),this.updateData(),this.state.textValue.split("\n").forEach((function(t){""===(t=t.trim())||e.state.invoicePriceMap.has(t)||P.forEach((function(a){fetch("http://invoice.ffutop.com/proxy/suppurDistributeRecent/getSuppurDistributeRecent.html?optionType=0",{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},body:T(t,a)}).then((function(e){return e.json()})).then((function(n){if(0!==n.rows.length){var i=0;n.rows.forEach((function(e){i+=e.purchaseCount*e.purchasePrice})),e.updateDataPriceMap(t,i)}e.getPayData(t,a,n.rows.length)}),(function(t){e.setState({error:t})}))}))}))}},{key:"getPayData",value:function(e,t,a){var n=this;fetch("http://invoice.ffutop.com/proxy/payCalendar/getPayData.html",{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},body:M(e,t,1)}).then((function(e){return e.json()})).then((function(t){0!==t.rows.length&&n.updateDataPaidMap(e,t.rows[0].payStatus)}),(function(e){n.setState({error:e})}))}},{key:"updateDataPriceMap",value:function(e,t){this.setState((function(a){var n=new Map(a.invoicePriceMap);return n.set(e,t),{invoicePriceMap:n}})),this.updateData()}},{key:"updateDataPaidMap",value:function(e,t){this.state.invoicePaidMap.has(e)||(this.setState((function(a){var n=new Map(a.invoicePaidMap);return n.set(e,t),{invoicePaidMap:n}})),this.updateData())}},{key:"updateData",value:function(){var e=this;this.setState((function(t){var a=[];return e.state.textValue.split("\n").forEach((function(e){""!==(e=e.trim())&&a.push({invoiceId:e,price:t.invoicePriceMap.get(e),paid:I.get(t.invoicePaidMap.get(e))})})),console.log(a),{data:a}}))}},{key:"render",value:function(){return Object(k.jsx)("div",{className:"App",children:Object(k.jsxs)(p.a,{children:[Object(k.jsx)(C,{}),Object(k.jsxs)(w,{children:[Object(k.jsxs)(g.a,{children:[Object(k.jsx)(b.a,{span:20,children:Object(k.jsx)(l.a,{placeholder:""===this.state.cookie?"\u8bf7\u8f93\u5165\u8d26\u53f7\u767b\u5f55\u540e\u7684 Cookie":"\u5df2\u81ea\u52a8\u68c0\u6d4b\u5230 Cookie\uff0c\u5982\u9700\u66f4\u65b0\u8bf7\u8f93\u5165\u540e\u6309\u56de\u8f66",onChange:this.handleInputChange,onPressEnter:this.setCookie})}),Object(k.jsx)(b.a,{span:4,children:Object(k.jsx)(f.a,{checkedChildren:"\u5df2\u5f00\u542f\u652f\u4ed8\u68c0\u6d4b",unCheckedChildren:"\u5df2\u5173\u95ed\u652f\u4ed8\u68c0\u6d4b",onChange:this.handleSwitchChange})})]}),Object(k.jsxs)(g.a,{children:[Object(k.jsx)(b.a,{span:20,children:Object(k.jsx)(O,{placeholder:"\u8bf7\u8f93\u5165\u53d1\u7968\u53f7",rows:4,allowClear:!0,onChange:this.handleTextAreaChange})}),Object(k.jsx)(b.a,{span:4,children:Object(k.jsx)(j.a,{type:"primary",onClick:this.getSuppurDistributeRecent,children:"\u67e5\u8be2"})})]}),Object(k.jsx)(v.a,{}),Object(k.jsx)(x.a,{columns:this.state.columns,dataSource:this.state.data,rowKey:function(e){return e.invoiceId},pagination:!1})]})]})})}}]),a}(i.a.Component),E=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,215)).then((function(t){var a=t.getCLS,n=t.getFID,i=t.getFCP,c=t.getLCP,o=t.getTTFB;a(e),n(e),i(e),c(e),o(e)}))};o.a.render(Object(k.jsx)(i.a.StrictMode,{children:Object(k.jsx)(R,{})}),document.getElementById("root")),E()}},[[205,1,2]]]);
//# sourceMappingURL=main.de752bd7.chunk.js.map